<ul class="nav navbar-nav">
  <li {% if page.url == "/" or page.url == "/index.html" %}class="active"{% endif %}><a href="{{ site.baseurl }}/">Home</a></li>
  <li {% if page.url contains "about" %}class="active"{% endif %}><a href="{{ site.baseurl }}/about/">About</a></li>
  <li class="dropdown {% if page.url contains "app-repository" %}active{% endif %}">
    <a class="dropdown-toggle" role="button" data-toggle="dropdown" href="{{ site.baseurl }}/app-repository/">App Repository <span class="caret"></span></a>
    <ul class="dropdown-menu" role="menu">
      <li role="presentation"><a role="menuitem" href="{{ site.baseurl }}/app-repository/">Show all apps</a></li>
      <li role="presentation" class="divider"></li>
      {% assign sorted_posts = (site.posts | where: "layout", "app" | sort: "appname") %}
      {% for post in sorted_posts %}
      {% capture curletter %}{{post.appname | truncate: 1, ''}}{% endcapture %}
      {% if curletter != oldletter %}
        {% unless forloop.first %}</ul>
      </li>{% endunless %}
      <li class="dropdown-submenu">
        <a class="dropdown-toggle" role="button" data-toggle="dropdown" tabindex="-1">{{ curletter }}</a>
        <ul class="dropdown-menu" role="menu">
      {% capture oldletter %}{{curletter}}{% endcapture %}
      {% endif %}
          <li role="presentation"><a role="menuitem" href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></li>
    {% endfor %}
        </ul>
      </li>
    </ul>
  </li>
  <li {% if page.url contains "cross-tool-repository" %}class="active"{% endif %}><a href="{{ site.baseurl }}/cross-tool-repository/">Cross-tool Repository</a></li>
  <li {% if page.url contains "kernel-modules" %}class="active"{% endif %}><a href="{{ site.baseurl }}/kernel-modules/">Kernel modules</a></li>
  <li class="dropdown {% if page.url contains "python-eggs" %}active{% endif %}"><a href="{{ site.baseurl }}/python-eggs/" class="dropdown-toggle" data-toggle="dropdown">Python eggs <span class="caret"></span></a>
    <ul class="dropdown-menu" role="menu">
      <li><a href="{{ site.baseurl }}/python-eggs/">Show all eggs</a></li>
      <li class="divider"></li>
      {% assign sorted_posts = (site.posts | where: "layout", "egg" | sort: "appname") %}
      {% for post in sorted_posts %}
        <li><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></li>
      {% endfor %}
    </ul>
  </li>
  <li class="dropdown"><a href="https://github.com/droboports/droboports.github.io/wiki" class="dropdown-toggle" data-toggle="dropdown">Wiki <span class="caret"></span></a>
    <ul class="dropdown-menu" role="menu">
      <li class="dropdown-header">For Developers</li>
      <li><a href="https://github.com/droboports/droboports.github.io/wiki/Setting-up-a-VM">Setting up a VM</a></li>
      <li><a href="https://github.com/droboports/droboports.github.io/wiki/Toolchains">Toolchains</a></li>
      <li class="divider"></li>
      <li class="dropdown-header">For End-users</li>
      <li><a href="https://github.com/droboports/droboports.github.io/wiki/Using-command-line-apps">Using command-line apps</a></li>
    </ul>
  </li>
</ul>
